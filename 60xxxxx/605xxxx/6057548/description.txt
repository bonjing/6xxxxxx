Discworld book 38, I Shall Wear Midnight, by Terry Pratchett.  
Young adult.  Tiffany Aching series.